  {% extends 'V1prototype/base.html' %}
  <html>
    <head>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    </head>
    <body>
    {% block sidebar %}
        <div class="row">
    <div class="col s3">
      <h4>Preferences</h4>
      <div class="userView">
      </div>
      <p>
        <input name="group1" type="radio" id="test2" checked />
        <label for="test2">Line chart</label>
      </p>
      <p>
        <input name="group1" type="radio" id="test3"  />
        <label for="test3">Bar chart</label>
      </p>
      <p>
        <input name="group1" type="radio" id="test4"  />
        <label for="test4">Raw data</label>
      </p>
      <div class="divider"></div>
      <div class="row">
        <div class="input-field col s6">
          <input placeholder="dd-mm-yyyy" id="first_name" type="text" class="validate">
          <label for="first_name">From</label>
        </div>
        <div class="input-field col s6">
          <input placeholder="dd-mm-yyyy" id="last_name" type="text" class="validate">
          <label for="last_name">To</label>
        </div>
      </div>
    </div>
    {% endblock %}
  {% block content %}
        <div class="col s9">
          <div id="linechart_material" ></div>
          <div id="table_div"></div>
          <a class="waves-effect waves-light btn">Copy graph</a>
          <a class="waves-effect waves-light btn">Export data</a> 
          {% for tide in tidesGraph %}
            <br>
            {{ tide.locationName }} -
            <!--<br>  -->
            {{ tide.time }}
            <br>
            {{ tide.value }}
          {% endfor %}
        </div>
    </body>
  </html>
    <script type="text/javascript">
//      google.charts.load('current', {'packages':['table']});
      google.charts.load('current', {'packages':['line']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'Tide');
        
        //tide.time on x-axis
        //tide.value on y-axis
        //time value in db: datetime.datetime(2017, 5, 30, 15, 0, tzinfo=<UTC>)
        //Google charts time should be:   
        data.addRows([
          {% for tide in tidesGraph %}
            [new Date({{ tide.time|date:"d-m-Y" }}), {{ tide.value }} ],
          {% endfor %}
        ]);

        var options = {
          chart: {
            title: '',
            subtitle: ''
          },
          width: 900,
          height: 500,
          hAxis: {
            format: 'd-m-Y',
            gridlines: {count: 15}
          },
          explorer: { 
                actions: ['dragToZoom', 'rightClickToReset'], 
                axis: 'vertical'
            }
        };

        var chart = new google.charts.Line(document.getElementById('linechart_material'));

        chart.draw(data, google.charts.Line.convertOptions(options));
      }
  </script>

  {% endblock %} 
